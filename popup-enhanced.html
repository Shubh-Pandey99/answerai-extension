<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>AI Meeting Assistant</title>
  <link rel="stylesheet" href="popup.css" />
</head>
<body>
  <div class="container">
    <header class="header">
      <div class="brand">
        <img src="icon.png" class="logo" alt="logo" />
        <h1>AI Meeting Assistant</h1>
      </div>
      <div class="header-actions">
        <button id="notification-toggle" class="icon-btn" title="Toggle notifications">ğŸ””</button>
        <button id="tts-toggle" class="icon-btn" title="Toggle TTS">ğŸ”Š</button>
      </div>
    </header>

    <section class="row">
      <!-- Live Audio -->
      <div class="card">
        <h2>Live Audio</h2>
        <div class="segmented">
          <span>Listen Mode</span>
          <label class="switch">
            <input id="listen-mode" type="checkbox" />
            <span class="slider"></span>
          </label>
          <span>Tab Audio</span>
        </div>

        <div class="pill">
          <button id="toggle-mic" class="pill-btn">
            <span id="mic-icon">ğŸ¤</span> Microphone
          </button>
        </div>

        <div class="waveform" id="waveform">
          <div class="bar"></div><div class="bar"></div><div class="bar"></div>
          <div class="bar"></div><div class="bar"></div>
        </div>

        <div id="live-transcript" class="transcript"></div>
      </div>

      <!-- Screen Capture -->
      <div class="card">
        <h2>Screen Capture</h2>
        <button id="capture-screen" class="primary">ğŸ“· Capture Screen</button>
        <img id="screenshot-preview" class="preview hidden" />
        <canvas id="annotation-canvas" class="preview hidden"></canvas>
        <div class="row-actions">
          <button id="annotate-image" class="ghost hidden">âœï¸ Annotate</button>
          <button id="save-annotation" class="ghost hidden">ğŸ’¾ Save</button>
          <button id="summarize-image" class="primary hidden">ğŸ§  Describe image</button>
        </div>
      </div>

      <!-- Real-time Q&A -->
      <div class="card">
        <h2>Real-time Q&A</h2>
        <input id="ask-input" placeholder="Ask anything..." />
        <div id="qqa-response" class="response"></div>
        <div class="row-actions">
          <button id="summarize" class="ghost">ğŸ“ Summarize key points</button>
          <button id="speak-response" class="icon-btn" title="Speak">ğŸ”Š</button>
        </div>
      </div>
    </section>

    <!-- Settings -->
    <section class="card">
      <h2>Settings</h2>
      <label>API URL</label>
      <input id="vercel-url-input" placeholder="http://127.0.0.1:5055" />
      <label>Provider</label>
      <select id="provider-select">
        <option value="google">Google Gemini</option>
        <option value="openai">OpenAI</option>
      </select>
      <label>Model</label>
      <select id="model-select">
        <option value="gpt-4o">GPT-4o</option>
        <option value="gpt-4o-mini">GPT-4o-mini</option>
        <option value="gemini-2.5-pro">Gemini 2.5 Pro</option>
        <option value="gemini-1.5-flash">Gemini 1.5 Flash</option>
      </select>
      <button id="save-settings" class="primary block">Save Settings</button>
    </section>

    <footer class="status">
      <span id="status-text">Status: Inactive</span>
      <span id="live-dot" class="dot hidden"></span>
    </footer>
  </div>

  <script src="popup-enhanced.js"></script>
</body>
</html>
